{"ast":null,"code":"const loginService = async user => {\n  // TODO: here call server by fetch\n  var myHeaders = new Headers();\n  myHeaders.append(\"Content-Type\", \"application/json\");\n  var raw = JSON.stringify({\n    \"userName\": user.userName,\n    \"password\": user.password\n  });\n  var requestOptions = {\n    method: 'POST',\n    headers: myHeaders,\n    body: raw,\n    redirect: 'follow'\n  };\n  var res;\n  await fetch(\"http://localhost:7002/api/auths/login\", requestOptions).then(response => response.text()).then(result => {\n    res = result;\n    console.log(result);\n  }).catch(error => {\n    console.log('error', error);\n    throw error(\"login error\");\n  });\n  var a = JSON.parse(res).message;\n  //alert(a)\n  sessionStorage.setItem(\"user\", user.userName);\n  return new Promise((resolve, reject) => {\n    resolve({\n      loginStatus: a === undefined ? \"ok\" : \"unknown\",\n      data: {\n        id: user.password,\n        name: user.userName,\n        userToken: res\n      }\n    });\n  });\n};\nconst registerService = _ref => {\n  let {\n    name,\n    email,\n    phone,\n    userName,\n    password\n  } = _ref;\n  var myHeaders = new Headers();\n  myHeaders.append(\"Content-Type\", \"application/json\");\n  var raw = JSON.stringify({\n    \"name\": name,\n    \"email\": email,\n    \"phone\": phone,\n    \"userName\": userName,\n    \"password\": password\n  });\n  if (userName === \"\" || password === \"\" || name === \"\") {\n    alert(\"name and password are require!\");\n    return null;\n  } else {\n    var requestOptions = {\n      method: 'POST',\n      headers: myHeaders,\n      body: raw,\n      redirect: 'follow'\n    };\n    var res;\n    fetch(\"http://localhost:7002/api/auths/register\", requestOptions).then(response => response.text()).then(result => res = result).catch(error => console.log('error', error));\n    a = JSON.parse(res).message;\n    alert(\"res\", a);\n    if (a === \"duplicate username\") {\n      return null;\n    } else {\n      return \"registered!\";\n    }\n    console.log(\"registered!\");\n  }\n};\nconst addToCartService = async b => {\n  console.log(\"b\", b);\n  var myHeaders = new Headers();\n  const obj = JSON.parse(sessionStorage.getItem(\"userToken\"));\n  const token = obj.accesstoken;\n  myHeaders.append(\"Authorization\", \"Bearer \" + token);\n  myHeaders.append(\"Content-Type\", \"application/json\");\n  var raw = JSON.stringify({\n    \"book\": b._id\n  });\n  var requestOptions = {\n    method: 'POST',\n    headers: myHeaders,\n    body: raw,\n    redirect: 'follow'\n  };\n  var res;\n  fetch(\"http://localhost:7002/api/carts\", requestOptions).then(response => response.text()).then(result => {\n    res = result;\n    console.log(result);\n  }).catch(error => console.log('error', error));\n  return res;\n};\nexport { loginService, registerService, addToCartService };","map":{"version":3,"names":["loginService","user","myHeaders","Headers","append","raw","JSON","stringify","userName","password","requestOptions","method","headers","body","redirect","res","fetch","then","response","text","result","console","log","catch","error","a","parse","message","sessionStorage","setItem","Promise","resolve","reject","loginStatus","undefined","data","id","name","userToken","registerService","_ref","email","phone","alert","addToCartService","b","obj","getItem","token","accesstoken","_id"],"sources":["E:/react/myproject/src/services.js"],"sourcesContent":["\r\nconst loginService = async (user) => {\r\n\r\n  // TODO: here call server by fetch\r\n  var myHeaders = new Headers();\r\n  myHeaders.append(\"Content-Type\", \"application/json\");\r\n  \r\n  var raw = JSON.stringify({\r\n    \"userName\": user.userName,\r\n    \"password\": user.password\r\n  });\r\n  \r\n  var requestOptions = {\r\n    method: 'POST',\r\n    headers: myHeaders,\r\n    body: raw,\r\n    redirect: 'follow'\r\n  };\r\n  var res;\r\n \r\n  await fetch(\"http://localhost:7002/api/auths/login\", requestOptions)\r\n    .then(response => response.text())\r\n    .then(result=>{res=result\r\n       console.log(result)})\r\n    .catch(error => {\r\n      console.log('error', error)\r\n      throw error(\"login error\")\r\n    });\r\n   \r\n  var a=JSON.parse(res).message\r\n    //alert(a)\r\n    sessionStorage.setItem(\"user\", user.userName);\r\n  return new Promise((resolve, reject) => {\r\n    resolve({\r\n      loginStatus :a === undefined ? \"ok\": \"unknown\",\r\n      data: { id: user.password, name: user.userName, userToken: res },\r\n   \r\n    });\r\n  });\r\n};\r\n\r\n\r\n\r\nconst registerService = ({ name, email, phone, userName, password }) => {\r\n  var myHeaders = new Headers();\r\nmyHeaders.append(\"Content-Type\", \"application/json\");\r\n\r\nvar raw = JSON.stringify({\r\n  \"name\": name,\r\n  \"email\":email,\r\n  \"phone\":phone,\r\n  \"userName\":userName,\r\n  \"password\":password\r\n\r\n});\r\nif(userName===\"\"||password===\"\"||name===\"\"){\r\n  alert(\"name and password are require!\")\r\n  return null\r\n  \r\n}  \r\nelse{\r\nvar requestOptions = {\r\n  method: 'POST',\r\n  headers: myHeaders,\r\n  body: raw,\r\n  redirect: 'follow'\r\n};\r\nvar res\r\nfetch(\"http://localhost:7002/api/auths/register\", requestOptions)\r\n  .then(response =>response.text())\r\n  .then(result => res=result)\r\n  .catch(error => console.log('error', error))\r\n  a=JSON.parse(res).message\r\n  alert(\"res\",a)\r\n  if(a===\"duplicate username\")\r\n  {\r\n  return null\r\n }\r\n else{\r\n  return \"registered!\"\r\n }\r\n  console.log(\"registered!\");\r\n\r\n  \r\n}}\r\nconst addToCartService=async (b)=>{\r\n  console.log(\"b\",b)\r\n  var myHeaders = new Headers();\r\n    const obj = JSON.parse(sessionStorage.getItem(\"userToken\"))\r\n   const token = obj.accesstoken;\r\n    myHeaders.append(\"Authorization\", \"Bearer \"+token);\r\n    myHeaders.append(\"Content-Type\", \"application/json\");\r\n    \r\n    var raw = JSON.stringify({\r\n      \"book\":b._id\r\n    });\r\n    var requestOptions = {\r\n      method: 'POST',\r\n      headers: myHeaders,\r\n      body: raw,\r\n      redirect: 'follow'\r\n    };\r\n    var res\r\n    fetch(\"http://localhost:7002/api/carts\", requestOptions)\r\n      .then(response => response.text())\r\n      .then(result => {\r\n        \r\n        res=result\r\n        console.log(result)})\r\n      .catch(error => console.log('error', error));\r\n    return res\r\n};\r\n\r\n\r\n\r\nexport { loginService, registerService ,addToCartService};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}